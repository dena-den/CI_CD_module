pipeline {
   agent any


   stages {
      stage('Adding_path') {
        steps {
          bat("set PATH=C:\\1PROGRAMS\\Python\\;%PATH%")
        }
      }
      stage('Creating_environment') {
        steps{      
          bat("C:\\1PROGRAMS\\Python\\python.exe -m venv .venv")
          bat(".venv\\Scripts\\activate")
          bat("C:\\1PROGRAMS\\Python\\python.exe -m pip install -r requirements.txt")
        }
        }
   
   stage('Runing_tests') {
     steps {
        bat("pytest -v")
     }
   }
   stage('Result') {
      steps {
        bat("echo 'Success!'")
      }
   }
  }
}
