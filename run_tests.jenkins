pipeline {
   agent any
   stages {
      stage('Adding_path') {
        steps {
          bat("set PATH=C:\\4COURSES\\DQE_Intermidiate\\CI_CD\\pytest\\.venv\\Scripts\\;%PATH%")
          bat("C:\\1PROGRAMS\\Python\\python.exe -m pip freeze")
        }
      }
      stage('Creating_environment') {
        steps{
          bat("C:\\1PROGRAMS\\Python\\python.exe -m venv .venv \n .venv\\Scripts\\activate \n C:\\1PROGRAMS\\Python\\python.exe -m pip install -r requirements.txt \n pytest -v")
        }
        }

   stage('Runing_tests') {
     steps {
        bat("C:\\1PROGRAMS\\Python\\python.exe -m pip freeze")
     }
   }
   stage('Result') {
      steps {
        bat("python first_test.py")
      }
   }
  }
}